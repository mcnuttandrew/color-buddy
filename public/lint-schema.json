{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "LintProgram": {
            "$ref": "#/definitions/LintExpression"
        },
        "LintExpression": {
            "$ref": "#/definitions/LintExpression"
        },
        "LintConjunction": {
            "$ref": "#/definitions/LintConjunction"
        },
        "LintBoolean": {
            "type": "boolean"
        },
        "LintVariable": {
            "type": "string"
        },
        "LintColor": {
            "anyOf": [
                {
                    "type": "string"
                },
                {}
            ]
        },
        "LintMathOps": {
            "type": "object",
            "patternProperties": {
                "^(\\+|\\-|\\*|\\/)$": {
                    "anyOf": [
                        {
                            "type": "number"
                        },
                        {
                            "$ref": "#/definitions/LintVariable"
                        }
                    ]
                }
            }
        },
        "LintPairOps": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "dist": {
                            "type": "object",
                            "properties": {
                                "left": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "right": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "space": {
                                    "enum": [
                                        "lab",
                                        "hsl"
                                    ]
                                }
                            },
                            "required": [
                                "left",
                                "right",
                                "space"
                            ]
                        }
                    },
                    "required": [
                        "dist"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "deltaE": {
                            "type": "object",
                            "properties": {
                                "left": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "right": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "algorithm": {
                                    "enum": [
                                        "2000",
                                        "76"
                                    ]
                                }
                            },
                            "required": [
                                "left",
                                "right",
                                "algorithm"
                            ]
                        }
                    },
                    "required": [
                        "deltaE"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "contrast": {
                            "type": "object",
                            "properties": {
                                "left": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "right": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "algorithm": {
                                    "enum": [
                                        "APCA",
                                        "WCAG21",
                                        "Michelson",
                                        "Weber",
                                        "Lstar",
                                        "DeltaPhi"
                                    ]
                                }
                            },
                            "required": [
                                "left",
                                "right",
                                "algorithm"
                            ]
                        }
                    },
                    "required": [
                        "contrast"
                    ]
                }
            ]
        },
        "LintMap": {
            "type": "object",
            "properties": {
                "filter": {
                    "$ref": "#/definitions/LintVariable"
                },
                "func": {
                    "$ref": "#/definitions/LintExpression"
                }
            },
            "required": [
                "filter",
                "func"
            ]
        },
        "LintReduce": {
            "type": "object",
            "patternProperties": {
                "^(sum|count|mean|max|min|first|last|extent)$": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/LintVariable"
                        },
                        {
                            "type": "array"
                        },
                        {
                            "$ref": "#/definitions/LintMap"
                        }
                    ]
                }
            }
        },
        "LintColorFunction": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "cvd_sim": {
                            "$ref": "#/definitions/LintVariable"
                        },
                        "type": {
                            "enum": [
                                "protanomaly",
                                "deuteranomaly",
                                "tritanopia",
                                "grayscale"
                            ]
                        }
                    },
                    "required": [
                        "cvd_sim",
                        "type"
                    ]
                },
                {
                    "$ref": "#/definitions/LintVariable"
                },
                {
                    "type": "object",
                    "properties": {
                        "toColor": {
                            "$ref": "#/definitions/LintVariable"
                        },
                        "space": {
                            "enum": [
                                "hsl",
                                "hsv",
                                "jzazbz",
                                "lab",
                                "lch",
                                "oklab",
                                "oklch",
                                "rgb",
                                "srgb"
                            ]
                        },
                        "channel": {
                            "enum": [
                                "a",
                                "az",
                                "b",
                                "bz",
                                "c",
                                "g",
                                "h",
                                "jz",
                                "l",
                                "okc",
                                "okl",
                                "r",
                                "s",
                                "v"
                            ]
                        }
                    },
                    "required": [
                        "toColor",
                        "space",
                        "channel"
                    ]
                },
                {
                    "type": "object",
                    "patternProperties": {
                        "^(hsl|hsv|jzazbz|lab|lch|oklab|oklch|rgb|srgb)\\.(a|az|b|bz|c|g|h|jz|l|okc|okl|r|s|v)$": {
                            "$ref": "#/definitions/LintVariable"
                        }
                    }
                }
            ]
        },
        "ColorSpace": {
            "enum": [
                "hsl",
                "hsv",
                "jzazbz",
                "lab",
                "lch",
                "oklab",
                "oklch",
                "rgb",
                "srgb"
            ]
        },
        "ColorChannel": {
            "enum": [
                "a",
                "az",
                "b",
                "bz",
                "c",
                "g",
                "h",
                "jz",
                "l",
                "okc",
                "okl",
                "r",
                "s",
                "v"
            ]
        },
        "LintRef": {
            "anyOf": [
                {
                    "$ref": "#/definitions/LintVariable"
                },
                {
                    "$ref": "#/definitions/LintValue"
                },
                {
                    "$ref": "#/definitions/LintMathOps"
                },
                {
                    "$ref": "#/definitions/LintPairOps"
                }
            ]
        },
        "LintComparisonBase": {
            "type": "object",
            "properties": {
                "left": {
                    "$ref": "#/definitions/LintRef"
                },
                "right": {
                    "$ref": "#/definitions/LintRef"
                }
            },
            "required": [
                "left",
                "right"
            ]
        },
        "LintComparison": {
            "anyOf": [
                {
                    "$ref": "#/definitions/LintComparisonBase"
                },
                {
                    "type": "object",
                    "properties": {
                        "==": {
                            "$ref": "#/definitions/LintComparisonBase"
                        }
                    },
                    "required": [
                        "=="
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "!=": {
                            "$ref": "#/definitions/LintComparisonBase"
                        }
                    },
                    "required": [
                        "!="
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "<": {
                            "$ref": "#/definitions/LintComparisonBase"
                        }
                    },
                    "required": [
                        "<"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        ">": {
                            "$ref": "#/definitions/LintComparisonBase"
                        }
                    },
                    "required": [
                        ">"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "similar": {
                            "type": "object",
                            "properties": {
                                "left": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "right": {
                                    "$ref": "#/definitions/LintRef"
                                },
                                "similarityThreshold": {
                                    "type": "number"
                                }
                            },
                            "required": [
                                "left",
                                "right",
                                "similarityThreshold"
                            ]
                        }
                    },
                    "required": [
                        "similar"
                    ]
                }
            ]
        },
        "LintQuantifierBase": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "varbs": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/LintVariable"
                            }
                        },
                        "where": {
                            "$ref": "#/definitions/LintExpression"
                        },
                        "in": {
                            "anyOf": [
                                {
                                    "$ref": "#/definitions/LintVariable"
                                },
                                {
                                    "type": "array"
                                },
                                {
                                    "$ref": "#/definitions/LintMap"
                                }
                            ]
                        }
                    },
                    "required": [
                        "varbs",
                        "in"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "varb": {
                            "$ref": "#/definitions/LintVariable"
                        },
                        "where": {
                            "$ref": "#/definitions/LintExpression"
                        },
                        "in": {
                            "anyOf": [
                                {
                                    "$ref": "#/definitions/LintVariable"
                                },
                                {
                                    "type": "array"
                                },
                                {
                                    "$ref": "#/definitions/LintMap"
                                }
                            ]
                        }
                    },
                    "required": [
                        "varb",
                        "in"
                    ]
                }
            ]
        },
        "LintQuantifier": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "all": {
                            "$ref": "#/definitions/LintQuantifierBase"
                        }
                    },
                    "required": [
                        "all"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "exist": {
                            "$ref": "#/definitions/LintQuantifierBase"
                        }
                    },
                    "required": [
                        "exist"
                    ]
                }
            ]
        },
        "LintMapAlt": {
            "type": "object",
            "properties": {
                "map": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/LintVariable"
                        },
                        {
                            "type": "array"
                        }
                    ]
                },
                "func": {
                    "$ref": "#/definitions/LintColorFunction"
                }
            },
            "required": [
                "map",
                "func"
            ]
        },
        "LintValue": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "number"
                },
                {
                    "type": "boolean"
                },
                {
                    "$ref": "#/definitions/LintColor"
                },
                {
                    "$ref": "#/definitions/LintVariable"
                },
                {
                    "$ref": "#/definitions/LintMathOps"
                },
                {
                    "$ref": "#/definitions/LintPairOps"
                },
                {
                    "$ref": "#/definitions/LintReduce"
                },
                {
                    "$ref": "#/definitions/LintColorFunction"
                }
            ]
        }
    },
    "definitions": {
        "LintExpression": {
            "anyOf": [
                {
                    "$ref": "#/definitions/LintConjunction"
                },
                {
                    "$ref": "#/definitions/LintQuantifier"
                },
                {
                    "$ref": "#/definitions/LintComparison"
                },
                {
                    "$ref": "#/definitions/LintBoolean"
                }
            ]
        },
        "LintConjunction": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "and": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/LintExpression"
                            }
                        }
                    },
                    "required": [
                        "and"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "or": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/LintExpression"
                            }
                        }
                    },
                    "required": [
                        "or"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "not": {
                            "$ref": "#/definitions/LintExpression"
                        }
                    },
                    "required": [
                        "not"
                    ]
                }
            ]
        },
        "LintQuantifier": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "all": {
                            "$ref": "#/definitions/LintQuantifierBase"
                        }
                    },
                    "required": [
                        "all"
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "exist": {
                            "$ref": "#/definitions/LintQuantifierBase"
                        }
                    },
                    "required": [
                        "exist"
                    ]
                }
            ]
        }
    }
}